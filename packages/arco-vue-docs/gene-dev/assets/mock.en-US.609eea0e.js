import{_ as d,d as m,u as f,o as g,c as w,w as o,m as y,r as k,e as n,a as p,b as s}from"./index.9c61ea88.js";const b=m({name:"ArcoMain",components:{},setup(){const{locale:a}=f(),t={meta:{type:"Arco Pro"},title:"Interface and Mock",description:"Network request, interceptor and simulation data"},c=(u,l)=>a.value==="zh-CN"?u:l;return{locale:a,data:t,changelog:typeof _changelog=="undefined"?void 0:_changelog,getMessage:c}}});function h(a,t,c,r,u,l){const e=k("anchor-head"),i=k("arco-article");return g(),w(i,y(a.data,{changelog:a.changelog}),{default:o(()=>[t[4]||(t[4]=n("p",null,[n("em",null,"Auto translate by google.")],-1)),p(e,{level:"2",href:"Network-request"},{default:o(()=>t[0]||(t[0]=[s("Network request")])),_:1}),t[5]||(t[5]=n("p",null,"Use axios to make remote interface requests.",-1)),t[6]||(t[6]=n("p",null,"It is recommended to improve the type definition of the returned and requested data.",-1)),t[7]||(t[7]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(" axios "),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'axios'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},"UserToken"),s(),n("span",{class:"token punctuation"},"{"),s(`
 token`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},"UserStateTypes"),s(),n("span",{class:"token punctuation"},"{"),s(`
 name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},";"),s(`
 location`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"getUserInfo"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token operator"},":"),s(" UserToken"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token comment"},"// Get complete type hints by passing generics."),s(`
 `),n("span",{class:"token keyword"},"return"),s(" axios"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"post"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("UserStateTypes"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/api/user/info'"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1)),p(e,{level:"2",href:"Interceptor"},{default:o(()=>t[1]||(t[1]=[s("Interceptor")])),_:1}),t[8]||(t[8]=n("p",null,"Multi-layer interceptors can be added according to the needs of your own system.",-1)),t[9]||(t[9]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(" axios"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s("AxiosRequestConfig"),n("span",{class:"token punctuation"},","),s(" AxiosResponse"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'axios'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// Users can modify according to their own background system"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},[s("HttpResponse"),n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token builtin"},"unknown"),n("span",{class:"token operator"},">")]),s(),n("span",{class:"token punctuation"},"{"),s(`
 status`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),s(`
 msg`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},";"),s(`
 code`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},";"),s(`
 data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

axios`),n("span",{class:"token punctuation"},"."),s("interceptors"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
 `),n("span",{class:"token punctuation"},"("),s("config"),n("span",{class:"token operator"},":"),s(" AxiosRequestConfig"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token comment"},"// Configure the request here"),s(`
   `),n("span",{class:"token keyword"},"return"),s(" config"),n("span",{class:"token punctuation"},";"),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token comment"},"// What to do with request errors"),s(`
   `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reject"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// Add response interceptor"),s(`
axios`),n("span",{class:"token punctuation"},"."),s("interceptors"),n("span",{class:"token punctuation"},"."),s("response"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
 `),n("span",{class:"token punctuation"},"("),s("response"),n("span",{class:"token operator"},":"),s(" AxiosResponse"),n("span",{class:"token operator"},"<"),s("HttpResponse"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token keyword"},"const"),s(" res "),n("span",{class:"token operator"},"="),s(" response"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},";"),s(`
   `),n("span",{class:"token comment"},"// if the custom code is not 20000, it is judged as an error."),s(`
   `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},"."),s("code "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token number"},"20000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
     `),n("span",{class:"token comment"},"// remind users"),s(`

     `),n("span",{class:"token comment"},"// 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;"),s(`
     `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s(`
       `),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"50008"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"50012"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"50014"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},"."),s("code"),n("span",{class:"token punctuation"},")"),s(`
     `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
       `),n("span",{class:"token comment"},"// do something"),s(`
     `),n("span",{class:"token punctuation"},"}"),s(`
     `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reject"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},"."),s("msg "),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"'Error'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
   `),n("span",{class:"token punctuation"},"}"),s(`
   `),n("span",{class:"token keyword"},"return"),s(" res"),n("span",{class:"token punctuation"},";"),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reject"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1)),t[10]||(t[10]=n("p",null,"Intercept ajax and return simulated data",-1)),p(e,{level:"2",href:"mock-solution"},{default:o(()=>t[2]||(t[2]=[s("mock solution")])),_:1}),t[11]||(t[11]=n("p",null,"Parallel development of the front and back ends means that the front end needs to be developed without interface data. In this case, if the function of simulating data requests can be provided, our data request code can be written normally. Pro uses Mock.js to achieve This feature.",-1)),t[12]||(t[12]=n("p",null,[s("Mock.js will intercept the ajax request. If there is a matching mock rule, the ajax will not be sent out, but the mock data will be returned. Mock.js has a wealth of simulation data generation methods, it is recommended to read the document first, the document is very clear and easy to understand "),n("a",{class:"link",href:"http://mockjs.com/"},"MockJs document")],-1)),t[13]||(t[13]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(" Mock "),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'mockjs'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
 successResponseWrap`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(" From"),n("span",{class:"token string"},"'@/utils/setup-mock'"),n("span",{class:"token punctuation"},";"),s(`

Mock`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"mock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"RegExp"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/api/chatList'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token keyword"},"const"),s(" data "),n("span",{class:"token operator"},"="),s(" Mock"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"mock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"successResponseWrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
       `),n("span",{class:"token string-property property"},"'data|4-6'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
           `),n("span",{class:"token punctuation"},"{"),s(`
               `),n("span",{class:"token string-property property"},"'id|+1'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(`
               username`),n("span",{class:"token operator"},":"),n("span",{class:"token string"},"'User 7352772'"),n("span",{class:"token punctuation"},","),s(`
               content`),n("span",{class:"token operator"},":"),n("span",{class:"token string"},"'It will start soon, so excited! '"),n("span",{class:"token punctuation"},","),s(`
               time`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'13:09:12'"),n("span",{class:"token punctuation"},","),s(`
               `),n("span",{class:"token string-property property"},"'isCollect|2'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
           `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
       `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

   `),n("span",{class:"token keyword"},"return"),s(" data"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1)),t[14]||(t[14]=n("p",null,[s("When the request url sent by the client is matched by "),n("code",null,"new RegExp('/api/chatList')"),s(", Mock.js will intercept the request, execute the corresponding callback function, and return the data returned in the callback function.")],-1)),t[15]||(t[15]=n("blockquote",null,[n("p",null,"Note: Requests that are matched and intercepted by Mock.js will not appear in the network panel of the developer tools.")],-1)),p(e,{level:"2",href:"Close-Mock"},{default:o(()=>t[3]||(t[3]=[s("Close Mock")])),_:1}),t[16]||(t[16]=n("p",null,[s("In order to facilitate the opening and closing of the data simulation function, each "),n("code",null,"Mock"),s(" will be wrapped by "),n("code",null,"setupMock.setup"),s(", the setupMock is as follows:")],-1)),t[17]||(t[17]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s("debug"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'./env'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" mock"),n("span",{class:"token punctuation"},","),s(" setup "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s("mock"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"boolean"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token function-variable function"},"setup"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("mock "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token operator"},"&&"),s(" debug"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token function"},"setup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1)),t[18]||(t[18]=n("p",null,"Data simulation is started by default in a non-production environment. When we need to debug the interface, we only need to set the mock parameter of setupMock to false, as follows:",-1)),t[19]||(t[19]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(" Mock "),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'mockjs'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(" setupMock "),n("span",{class:"token keyword"},"from"),n("span",{class:"token string"},"'../utils/setupMock'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token function"},"setupMock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
 mock`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),s(`
 `),n("span",{class:"token function"},"setup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token comment"},"// User Info"),s(`
   Mock`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"mock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"RegExp"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/api/userInfo'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
       `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
         name`),n("span",{class:"token operator"},":"),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(`
       `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
   `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1))]),_:1},16,["changelog"])}var M=d(b,[["render",h]]);export{M as default};
