import{_ as d,d as m,u as g,o as f,c as w,w as o,m as y,r as i,e as n,a as p,b as s}from"./index.9c61ea88.js";const h=m({name:"ArcoMain",components:{},setup(){const{locale:t}=g(),a={meta:{type:"Arco Pro"},title:"Permission control",description:"Permission control is a very common basic function in middle and background scenarios. In v2.2.0, the permission control function was integrated into Arco Design Pro"},c=(u,l)=>t.value==="zh-CN"?u:l;return{locale:t,data:a,changelog:typeof _changelog=="undefined"?void 0:_changelog,getMessage:c}}});function b(t,a,c,r,u,l){const e=i("anchor-head"),k=i("arco-article");return f(),w(k,y(t.data,{changelog:t.changelog}),{default:o(()=>[a[3]||(a[3]=n("p",null,[n("em",null,"Auto translate by google.")],-1)),p(e,{level:"2",href:"Applicable-scene"},{default:o(()=>a[0]||(a[0]=[s("Applicable scene")])),_:1}),a[4]||(a[4]=n("p",null,"The common front-end permission control in the middle and background can be roughly summarized as the following scenarios:",-1)),a[5]||(a[5]=n("ol",null,[n("li",null,"Menu permission control, manage permissions for a certain menu/page , you can see this page, otherwise it will show no permission.")],-1)),a[6]||(a[6]=n("ol",{start:"2"},[n("li",null,"Menu permission control, manage permissions for a certain menu/page , you can see this page, otherwise it will show no permission.")],-1)),p(e,{level:"2",href:"Usage"},{default:o(()=>a[1]||(a[1]=[s("Usage")])),_:1}),a[7]||(a[7]=n("h3",{id:"Menu permission management"},"Menu permission management",-1)),a[8]||(a[8]=n("p",null,[s("For menu and routing permission control, you can add "),n("code",null,"roles"),s(" parameters . (If not added, the default is to have permission)")],-1)),a[9]||(a[9]=n("p",null,[n("code",null,"roles"),s(" can be defined according to their own business.")],-1)),a[10]||(a[10]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
  path`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'dashboard'"),n("span",{class:"token punctuation"},","),s(`
  name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'dashboard'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token function-variable function"},"component"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/views/dashboard/index.vue'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  meta`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    locale`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'menu.dashboard'"),n("span",{class:"token punctuation"},","),s(`
    requiresAuth`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
    icon`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'icon-dashboard'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  children`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      path`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'workplace'"),n("span",{class:"token punctuation"},","),s(`
      name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'workplace'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token function-variable function"},"component"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/views/dashboard/workplace/index.vue'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      meta`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        locale`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'menu.dashboard.workplace'"),n("span",{class:"token punctuation"},","),s(`
        requiresAuth`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        roles`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'*'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// * Indicates wildcard permissions. Tip: In order to write less code, you can also not define this field."),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      path`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'monitor'"),n("span",{class:"token punctuation"},","),s(`
      name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'monitor'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token function-variable function"},"component"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/views/dashboard/monitor/index.vue'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      meta`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        locale`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'menu.dashboard.monitor'"),n("span",{class:"token punctuation"},","),s(`
        requiresAuth`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        roles`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'admin'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1)),a[11]||(a[11]=n("h3",{id:"A button permission management"},"A button permission management",-1)),a[12]||(a[12]=n("p",null,[s("Arco Design Pro encapsulates the "),n("code",null,"v-permission"),s(" directives . Can be used on components or native elements."),n("br"),s("As follows, place the authorized role types in the array.")],-1)),a[13]||(a[13]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"v-permission"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("['admin']"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("Delete"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("a-button")]),s(),n("span",{class:"token attr-name"},"v-permission"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("['user']"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("Delete"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("a-button")]),n("span",{class:"token punctuation"},">")]),s(`
`)])],-1)),a[14]||(a[14]=n("p",null,"The above is the specific method of using the front-end page for permission control, but it needs to combine the back-end interface to return the specific permissions owned by the user to the front-end.",-1)),a[15]||(a[15]=n("p",null,"At the same time, in the middle and back-end systems, it is far from enough to have simple front-end permission control, and the back-end is also required to perform interface permission control. In particular, some interfaces involving write operations need to strictly control permissions.",-1)),p(e,{level:"2",href:"Accomplish"},{default:o(()=>a[2]||(a[2]=[s("Accomplish")])),_:1}),a[16]||(a[16]=n("h3",{id:"Routing authority management"},"Routing authority management",-1)),a[17]||(a[17]=n("p",null,"Pro provides corresponding permission management hooks. The permission requirements of the business can be customized.",-1)),a[18]||(a[18]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[s("#src"),n("span",{class:"token operator"},"/"),s("hooks"),n("span",{class:"token operator"},"/"),s("permission"),n("span",{class:"token punctuation"},"."),s(`ts

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" RouteLocationNormalized"),n("span",{class:"token punctuation"},","),s(" RouteRecordRaw "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue-router'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useUserStore "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@/store'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"usePermission"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" userStore "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useUserStore"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"accessRouter"),n("span",{class:"token punctuation"},"("),s("route"),n("span",{class:"token operator"},":"),s(" RouteLocationNormalized "),n("span",{class:"token operator"},"|"),s(" RouteRecordRaw"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// Determine whether the current user has permission to the route"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"!"),s("route"),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token operator"},"?."),s("requiresAuth "),n("span",{class:"token operator"},"||"),s(`
        `),n("span",{class:"token operator"},"!"),s("route"),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token operator"},"?."),s("roles "),n("span",{class:"token operator"},"||"),s(`
        route`),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token operator"},"?."),s("roles"),n("span",{class:"token operator"},"?."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'*'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(`
        route`),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token operator"},"?."),s("roles"),n("span",{class:"token operator"},"?."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),s("userStore"),n("span",{class:"token punctuation"},"."),s("role"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// You can add any rules you want"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])],-1)),a[19]||(a[19]=n("p",null,"Set up a route guard, and manage the user's page entry and exit in the route guard. For example, whether the current user has logged in and whether the current user has page permissions.",-1)),a[20]||(a[20]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"beforeEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),s("to"),n("span",{class:"token punctuation"},","),s(" from"),n("span",{class:"token punctuation"},","),s(" next"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" userStore "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useUserStore"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"crossroads"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" Permission "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"usePermission"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("Permission"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"accessRouter"),n("span",{class:"token punctuation"},"("),s("to"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" destination "),n("span",{class:"token operator"},"="),s(" Permission"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findFirstPermissionRoute"),n("span",{class:"token punctuation"},"("),s(`
        appRoutes`),n("span",{class:"token punctuation"},","),s(`
        userStore`),n("span",{class:"token punctuation"},"."),s(`role
      `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token punctuation"},"{"),s(`
        name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'notFound'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Go to the first authorized page or 404."),s(`
      `),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),s("destination"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isLogin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// Check if the user is logged in"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("userStore"),n("span",{class:"token punctuation"},"."),s("role"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token comment"},"// If there is role information, it means that the current user has logged in and obtained user information."),s(`
      `),n("span",{class:"token function"},"crossroads"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"await"),s(" userStore"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Obtain user role information and then perform subsequent jump processing"),s(`
        `),n("span",{class:"token function"},"crossroads"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
          name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'login'"),n("span",{class:"token punctuation"},","),s(`
          query`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
            redirect`),n("span",{class:"token operator"},":"),s(" to"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token operator"},"..."),s("to"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"as"),s(" LocationQueryRaw"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Redirect to login page if not logged in"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("to"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'login'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'login'"),n("span",{class:"token punctuation"},","),s(`
      query`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        redirect`),n("span",{class:"token operator"},":"),s(" to"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"..."),s("to"),n("span",{class:"token punctuation"},"."),s("query"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"as"),s(" LocationQueryRaw"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1)),a[21]||(a[21]=n("p",null,"Custom permission directive",-1)),a[22]||(a[22]=n("pre",{class:"code-content"},[n("code",{class:"language-lang"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" DirectiveBinding "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'vue'"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" useUserStore "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@/store'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"checkPermission"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token operator"},":"),s(" HTMLElement"),n("span",{class:"token punctuation"},","),s(" binding"),n("span",{class:"token operator"},":"),s(" DirectiveBinding"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" value "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" binding"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" userStore "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"useUserStore"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" role "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" userStore"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"isArray"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},"."),s("length "),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" permissionValues "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token comment"},"// Compare the role permission of the current user with the permission type of the incoming command. If the current user does not have permission, the node deletion operation will be performed."),s(`
      `),n("span",{class:"token keyword"},"const"),s(" hasPermission "),n("span",{class:"token operator"},"="),s(" permissionValues"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),s("role"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("hasPermission "),n("span",{class:"token operator"},"&&"),s(" el"),n("span",{class:"token punctuation"},"."),s("parentNode"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        el`),n("span",{class:"token punctuation"},"."),s("parentNode"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeChild"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},`need roles! Like v-permission="['admin','user']"`),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"mounted"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token operator"},":"),s(" HTMLElement"),n("span",{class:"token punctuation"},","),s(" binding"),n("span",{class:"token operator"},":"),s(" DirectiveBinding"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"checkPermission"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},","),s(" binding"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token function"},"updated"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token operator"},":"),s(" HTMLElement"),n("span",{class:"token punctuation"},","),s(" binding"),n("span",{class:"token operator"},":"),s(" DirectiveBinding"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"checkPermission"),n("span",{class:"token punctuation"},"("),s("el"),n("span",{class:"token punctuation"},","),s(" binding"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])],-1))]),_:1},16,["changelog"])}var A=d(h,[["render",b]]);export{A as default};
